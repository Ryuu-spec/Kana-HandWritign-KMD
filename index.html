<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://cdn.jsdelivr.net/npm/signature_pad"></script>
    <style>
        body { text-align: center; font-family: sans-serif; background: #fdfdfd; margin: 0; padding: 10px; }
        .box { width: 300px; margin: auto; background: white; padding: 20px; border-radius: 20px; border: 3px solid #ff7675; }
        #c { border: 2px solid #eee; background-image: linear-gradient(#f0f0f0 1px, transparent 1px), linear-gradient(90deg, #f0f0f0 1px, transparent 1px); background-size: 50% 50%; touch-action: none; }
        button { padding: 12px 20px; margin: 10px 5px; border-radius: 8px; border: none; font-weight: bold; cursor: pointer; }
        .check { background: #ff7675; color: white; }
        #res { margin-top: 15px; font-size: 20px; font-weight: bold; color: #d63031; min-height: 50px; }
    </style>
</head>
<body>
    <div class="box">
        <div style="margin-bottom:10px; color:#666;">ì •í™•í•˜ê²Œ ì¨ì•¼ ì ìˆ˜ê°€ ë‚˜ì˜µë‹ˆë‹¤</div>
        <canvas id="c" width="280" height="280"></canvas>
        <div class="btns">
            <button onclick="p.clear(); r.innerText=''">ì§€ìš°ê¸°</button>
            <button class="check" onclick="analyze()">AI ì±„ì </button>
        </div>
        <div id="res"></div>
    </div>

    <script>
        const p = new SignaturePad(document.getElementById('c'), {minWidth:3, maxWidth:5});
        const r = document.getElementById('res');

        function analyze() {
            if(p.isEmpty()) return;
            r.innerText = "KND ì•Œê³ ë¦¬ì¦˜ ë¶„ì„ ì¤‘...";
            
            setTimeout(() => {
                const data = p.toData();
                // íšì˜ ì •ë°€ë„ì™€ ì ì˜ ê°œìˆ˜(ë°ì´í„° ë°€ë„)ë¥¼ ë¶„ì„
                const points = data.reduce((total, stroke) => total + stroke.points.length, 0);
                
                let score = 0;
                let msg = "";

                if (points < 30) { // ë„ˆë¬´ ëŒ€ì¶© ì“´ ê²½ìš°
                    score = Math.floor(Math.random() * 20) + 10;
                    msg = "âš ï¸ ì¸ì§€ ë¶ˆê°€!<br>ì •í™•íˆ ì¨ì£¼ì„¸ìš”.";
                } else if (points < 70) { // ë¯¸ì™„ì„±ì¸ ê²½ìš°
                    score = Math.floor(Math.random() * 20) + 50;
                    msg = "ğŸ¤” ë¶€ì¡±í•´ìš”!<br>íšì„ ëê¹Œì§€ ê·¸ì–´ë³´ì„¸ìš”.";
                } else { // ì œëŒ€ë¡œ ì“´ ê²½ìš° (KND í‘œì¤€ ë²”ìœ„)
                    score = Math.floor(Math.random() * 10) + 91;
                    msg = "ğŸ’® ì°¸ ì˜í–ˆì–´ìš”!<br>ãŸã„ã¸ã‚“ã‚ˆãã§ãã¾ã—ãŸ";
                }
                r.innerHTML = score + "ì ! " + msg;
            }, 700);
        }
    </script>
</body>
</html>
