<script>
    function analyze() {
        if(p.isEmpty()) return;
        r.innerText = "KND AI ë¶„ì„ ì¤‘...";
        
        setTimeout(() => {
            const data = p.toData();
            // ì‚¬ìš©ìê°€ ê·¸ë¦° ì „ì²´ ì (points)ì˜ ê°œìˆ˜ë¥¼ í•©ì‚°
            const totalPoints = data.reduce((total, stroke) => total + stroke.points.length, 0);
            
            let score = 0;
            if (totalPoints < 35) { 
                // ì—‰í„°ë¦¬ë¡œ ì“´ ê²½ìš° (ë°ì´í„°ê°€ ë„ˆë¬´ ì ìŒ)
                score = Math.floor(Math.random() * 20) + 5; 
                r.innerHTML = score + "ì ! âš ï¸<br>ê¸€ìë¥¼ ë” ì •í™•íˆ ì¨ë³´ì„¸ìš”.";
            } else if (totalPoints < 80) { 
                // ëª¨ì–‘ì´ ë¶€ì¡±í•œ ê²½ìš°
                score = Math.floor(Math.random() * 20) + 50;
                r.innerHTML = score + "ì !<br>ì¡°ê¸ˆ ë” ì •ì„±ê» ì¨ë³¼ê¹Œìš”?";
            } else { 
                // ì œëŒ€ë¡œ ì“´ ê²½ìš°
                score = Math.floor(Math.random() * 10) + 90;
                r.innerHTML = score + "ì ! ğŸ’®<br>ì°¸ ì˜í–ˆì–´ìš”!";
            }
        }, 700);
    }
</script>
